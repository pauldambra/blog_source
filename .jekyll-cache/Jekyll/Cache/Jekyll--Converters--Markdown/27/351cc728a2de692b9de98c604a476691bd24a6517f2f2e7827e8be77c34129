I"¡0<p>This post is part of a series where I'm hoping to prove to myself that building a dynamic website without a CMS is comparable to building one with a known CMS. <a href="/2014/02/websites-cms.html">See the first post for an explanation of why</a></p>

<p><a href="/2014/03/websites-cms-displaying-pages.html">Previous Post</a>
<!--alex ignore her-him --->
In his awesome book, "Don't Make Me Think" <a href="https://www.amazon.co.uk/Dont-Make-Me-Think-Usability/dp/B00HJUBRPG/ref=sr_1_1?s=books&amp;ie=UTF8&amp;qid=1473701528&amp;sr=1-1&amp;keywords=Don%27t+Make+Me+Think%3A+A+Common+Sense+Approach+to+Web+Usability+%28Voices+That+Matter%29">(shameless affiliate link)</a>, Steve Krug drives home the message that time spent figuring out how your site is supposed to work is not time spent deciding to engage with your site. So, we're not going to do any ground-breaking design work for this company web page.</p>

<!--more-->

<p>When people visit the site they should understand straight away how they're supposed to use it. An image search for <a href="https://www.google.co.uk/search?q=company+website&amp;safe=off&amp;espv=210&amp;es_sm=119&amp;source=lnms&amp;tbm=isch&amp;sa=X&amp;ei=dNwmU8XBKu6y0AW144GgBQ&amp;ved=0CAkQ_AUoAQ&amp;biw=1246&amp;bih=658#pws=0&amp;q=company+website&amp;safe=off&amp;tbm=isch">'company website'</a> shows the same design over and over again - and, I expect, you'll be instantly familiar with it.</p>

<p>A logo, a navigation bar, a large carousel or image area, some content in columns below, and a footer.</p>

<p><img src="http://fc06.deviantart.net/fs70/f/2011/136/f/4/cargo_company_website_layout__by_rizmax-d3ghbws.jpg" alt="A random image from Google images search for 'company website' (not an endorsement" />)</p>

<p>There are relatively few company websites that step away from this basic design. And this site for (the hopefully fake) 'Omniclopse' isn't going to stray from this format.</p>

<h1 id="layout">Layout</h1>

<p>The site is going to use <a href="http://getbootstrap.com/">Twitter Bootstrap</a> for layout and custom styling will be written with SASS instead of directly as CSS.</p>

<p>Twitter Bootstrap because I'm familiar with it, I can expect others to be familiar with it, and while there is a risk that the site ends up looking like every other site built with Bootstrap the intention is specifically not to worry about breaking design records - the site should aim to use a visual language that the visitor already speaks.</p>

<p>SASS because it is <b><i>so</i></b> much nicer writing SASS than CSS.</p>

<p>I like my HTML templates to actually be HTML so when Express is setup the default Jade view engine will be removed and a Handlebars view engine will be used instead.</p>

<p>I haven't used a Handlebars view engine with Express before so I'll need to do a touch of Google-Fu to find one.</p>

<h1 id="so">So!</h1>

<p>To grab bootstrap and jQuery (which bootstrap depends on) I'll use <a href="http://bower.io/">Bower</a>. If you're playing along you can download them directly (but that's no fun, right).</p>

<p>At the terminal: <code class="language-plaintext highlighter-rouge">bower install bootstrap -Sa</code></p>

<p>Which downloads bootstrap into the project and adds the dependency to the Bower file.</p>

<p><img src="http://2.bp.blogspot.com/-baCBB1wk9v4/UydeKDfveOI/AAAAAAAANTI/biw5I8wKUGE/s1600/Screenshot+2014-03-17+20.41.27.png" alt="bower screenshot" /></p>

<p>Bower, by default, adds everything into a bower_components directory so we tell Express about that in the Express app config:</p>

<p><code class="language-plaintext highlighter-rouge">app.use(express.static('/libs',__dirname + '/bower_components'));</code></p>

<h1 id="view-engine">View Engine</h1>

<p>At the terminal: <code class="language-plaintext highlighter-rouge">npm install express3-handlebars --save</code></p>

<p>installs the <a href="https://github.com/ericf/express3-handlebars">Express3 Handlebars view engine</a>.</p>

<p>Add the view engine's config to the server.js file:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">express</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>
<span class="kd">var</span> <span class="nx">exp3hbs</span>  <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">express3-handlebars</span><span class="dl">'</span><span class="p">);</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="dl">'</span><span class="s1">/libs</span><span class="dl">'</span><span class="p">,</span> <span class="nx">express</span><span class="p">.</span><span class="kd">static</span><span class="p">(</span><span class="nx">__dirname</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">/bower_components</span><span class="dl">'</span><span class="p">));</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">engine</span><span class="p">(</span><span class="dl">'</span><span class="s1">handlebars</span><span class="dl">'</span><span class="p">,</span> <span class="nx">exp3hbs</span><span class="p">({</span><span class="na">defaultLayout</span><span class="p">:</span> <span class="dl">'</span><span class="s1">main</span><span class="dl">'</span><span class="p">}));</span>
<span class="nx">app</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">'</span><span class="s1">view engine</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">handlebars</span><span class="dl">'</span><span class="p">);</span>

<span class="nx">app</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">/</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">){</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="dl">'</span><span class="s1">home</span><span class="dl">'</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="mi">1337</span><span class="p">);</span>

<span class="nx">exports</span><span class="p">.</span><span class="nx">app</span> <span class="o">=</span> <span class="nx">app</span><span class="p">;</span>
</code></pre></div></div>

<p>This requires two layout files be added to the site:</p>

<p><img src="http://3.bp.blogspot.com/-lLif2FbDonw/Uyd6VGPgoTI/AAAAAAAANTY/7oLoCCYcqKg/s1600/Screenshot+2014-03-17+22.41.59.png" alt="layouts file tree" /></p>

<p>Here main.handlebars is the default base layout and home.handlebars is rendered by the method that responds to the root route.</p>

<p>At this point what the site does hasn't changed how it does what it does so the single test (useless as it is) still passes.</p>

<h1 id="building-out-the-base-template">Building out the Base Template</h1>

<p>Starting to build out the page requires setup to use SASS.</p>

<h4 id="gulp">Gulp</h4>

<p>There is an express plugin that will transpile SASS files when CSS requests are served but, as I want to use Gulp for some linting and minification tasks later on, this is the time to <a href="https://github.com/gulpjs/gulp/blob/master/docs/getting-started.md#getting-started">plug Gulp into the project </a>and set up a watch task to transpile SASS to CSS.</p>

<p>So at the terminal:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm <span class="nb">install</span> <span class="nt">--save-dev</span> gulp

npm <span class="nb">install</span> <span class="nt">--save-dev</span> gulp-sass
</code></pre></div></div>

<p>Then a little fangling to generate the gulp file.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">gulp</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">gulp</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">sass</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">gulp-sass</span><span class="dl">'</span><span class="p">);</span>

<span class="nx">gulp</span><span class="p">.</span><span class="nx">task</span><span class="p">(</span><span class="dl">'</span><span class="s1">sass</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">gulp</span><span class="p">.</span><span class="nx">src</span><span class="p">(</span><span class="dl">'</span><span class="s1">./scss/*.scss</span><span class="dl">'</span><span class="p">)</span>
        <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">sass</span><span class="p">())</span>
        <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">gulp</span><span class="p">.</span><span class="nx">dest</span><span class="p">(</span><span class="dl">'</span><span class="s1">./public/css</span><span class="dl">'</span><span class="p">));</span>
<span class="p">});</span>

<span class="nx">gulp</span><span class="p">.</span><span class="nx">task</span><span class="p">(</span><span class="dl">'</span><span class="s1">watch</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">gulp</span><span class="p">.</span><span class="nx">watch</span><span class="p">(</span><span class="dl">'</span><span class="s1">./scss/*.scss</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span><span class="dl">'</span><span class="s1">sass</span><span class="dl">'</span><span class="p">]);</span>
<span class="p">});</span>

<span class="nx">gulp</span><span class="p">.</span><span class="nx">task</span><span class="p">(</span><span class="dl">'</span><span class="s1">default</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span><span class="dl">'</span><span class="s1">sass</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">watch</span><span class="dl">'</span><span class="p">]);</span>
</code></pre></div></div>

<p>Typing gulp into the terminal now leaves a task running which watches for changes to .scss files and transpiles them to .css files</p>

<h3 id="the-omniclopse-brand">The Omniclopse Brand</h3>

<p>For the imaginary company we're making a site for we can <a href="http://colorschemedesigner.com/">generate a colour palette</a></p>

<p><img src="http://1.bp.blogspot.com/-BUSdRfoR_fc/UytGol1Ni5I/AAAAAAAAPMc/pqoQv7RgnbY/s1600/Screenshot+2014-03-20+19.44.18.png" alt="Yes, I am NOT a designer" /></p>

<h1 id="the-page">The Page</h1>

<p>and after a bit of fangling to build out the (admittedly ugly) page:</p>

<p><img src="http://3.bp.blogspot.com/-52O3oytmg_E/Uy7SVJgQ-JI/AAAAAAAAPg4/jNbYLNIcXI8/s1600/home-one.png" alt="screenshot of the built page" /></p>

<p>The code for this page can be found <a href="https://github.com/pauldambra/omniclopse/tree/v0.1">tagged on github</a> and at this point there's nothing groundbreaking (nor should there be). You can visit the site <a href="http://omniclopse-v0-1.herokuapp.com/">here on Heroku</a>.</p>

<p>There are bits of the page HTML that I'm not happy with but that can be changed as the site work progresses.</p>

<p>The single test in the project still passes but that doesn't really prove anything. So the next post is going to be a short aside about using Selenium and Browserstack.</p>
:ET